// Set RNA-seq specific parameters

// Path to your project folder containg the fastq file folder
params.project_dir = "/sc/arion/projects/Nestlerlab/shenl03_rna/aarthi/2024/li/nextflow/demo"

// Path to the folder of HISAT2 index files
params.index_files = "/sc/arion/projects/Nestlerlab/shenl03_rna/aarthi/ref/ensembl_109/mouse/fastq/"

// Basename of HISAT2 index
params.index_basename = "mm39"

// Path to your GTF file
params.gtf_file = "/sc/arion/projects/Nestlerlab/shenl03_rna/aarthi/ref/ensembl_109/mouse/Mus_musculus.GRCm39.109.gtf"

// Is your data single or paired-end? If paired-end, set to true
params.pairedEnd = true

// Path to your multiqc configuration file 
params.multiqc_config = "/sc/arion/projects/Nestlerlab/shenl03_rna/aarthi/NGS-Data-Charmer/multiqc_config_template.yaml"

// Counting scheme for featureCounts 
// Set count_unique to true and count_fraction to false if you want to assign unique read counts to features
// Set count_fraction to true and count_unique to false if you want to assign fractional counts to features 
// Set both to false if you prefer to count all reads for each feature
params.count_unique = true
params.count_fraction = false

// Singularity specific parameters (Leave it as true)
singularity.enabled = true

// cacheDir: Set the directory in which you want to store the singularity images
// runOptions: Do not change
singularity {
    cacheDir = "/sc/arion/projects/Nestlerlab/shenl03_rna/aarthi/singularity_cache"
    runOptions = "--bind ${params.multiqc_config}:${params.multiqc_config} --bind ${params.index_files}:${params.index_files} --bind ${params.gtf_file}:${params.gtf_file}"
}


// You may want to increase the process.time parameter under 'minerva' profile to '2h' if fastq files are large
profiles {

    local {
        process.executor = 'local'
        process.cpus = 4
    }

    minerva {
        process.executor = 'LSF'
        process.queue = 'premium'
        process.memory = '16 GB'
        process.time = '30 min'
        process.cpus = 1
        process.clusterOptions = " -P acc_Nestlerlab "

        withName: 'ALIGNMENT_STEP' {
            memory = '32 GB'
        }

        
}
}


// Do not modify the following

process {
    
    container = 'nfcore/rnaseq:1.4.2'

    withName: FASTQC {
        container = 'staphb/fastqc'
    }

    withName: READ_TRIM_GALORE {
        container = 'dukegcb/trim-galore'
    }

    withName: ALIGNMENT_STEP {
        container = 'aarthir239/hisat2'
    }

    withName: SORTED_BAM_STEP {
        container = 'biocontainers/samtools:v1.9-4-deb_cv1'
    }

    withName: COUNTS_STEP {
        container = 'thatdnaguy/featurecounts:v2.0.6_02'
    }

    withName: COUNTS_MATRIX {
        container = 'biocontainers/pandas:1.5.1_cv1'
    }

    withName: MULTIQC_STEP {
        container = 'multiqc/multiqc'
    }
}
